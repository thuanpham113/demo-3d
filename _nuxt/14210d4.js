(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{399:function(e,t,r){"use strict";r.r(t);var n=r(415),o=r(394),c=r(8),h=r(28),d=r(27),l=(r(389),r(390),r(42),r(19),r(5),r(24),r(15),r(18),r(25),r(31),r(32),r(388)),f=r(395),m=r(396),w=r(397),v=r(398);function y(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function O(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?y(Object(source),!0).forEach((function(t){Object(c.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):y(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var j=Object(h.a)((function e(t){Object(d.a)(this,e),this.meshes=t})),C={props:{borderRadius:{type:String,default:void 0},src:{type:String,default:void 0}},data:function(){return{camera:null,scene:null,renderer:null,gltf:null,orbitControls:null,transformControls:null,assets:[],gltfName:"",objectMesh:null,box:null,mesh:void 0}},mounted:function(){var e=this,t=this.$refs.player3d;this.camera=new l.Z(45,this.$refs.player3d.clientWidth/this.$refs.player3d.clientHeight,.01,2e3),this.camera.focus=100,this.camera.position.set(0,2,2),this.scene=new l.lb;var r=new l.bb(16777215,1);r.position.set(0,10,0),this.scene.add(r);var n=new l.a(16777215);this.scene.add(n);var o=new l.l(16777215,1);this.scene.add(o),this.renderer=new l.Cb({antialias:!0,preserveDrawingBuffer:!0}),this.renderer.setClearColor("#ffffff"),this.renderer.setSize(this.$refs.player3d.clientWidth,this.$refs.player3d.clientHeight),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.toneMapping=l.jb,this.renderer.gammaFactor=1.5,this.renderer.gammaOutput=!0,this.renderer.setClearColor(16777215,1);var c=new l.Y(this.renderer);this.scene.environment=c.fromScene(new v.a,.04).texture,t.appendChild(this.renderer.domElement),this.orbitControls=new m.a(this.camera,this.renderer.domElement),this.orbitControls.addEventListener("change",(function(){return e.renderer.render(e.scene,e.camera)})),this.transformControls=new w.a(this.camera,this.renderer.domElement),this.scene.add(this.transformControls),this.loadGLTF(this.src),this.animate(),this.$refs.player3d.children[0].style.borderRadius=this.borderRadius||"0px"},methods:{toggleClick:function(e){var t=this,r=new l.ib,n=new l.zb;e.preventDefault(),n.x=(e.clientX-this.$refs.player3d.getBoundingClientRect().x)/this.$refs.player3d.clientWidth*2-1,n.y=-(e.clientY-this.$refs.player3d.getBoundingClientRect().y)/this.$refs.player3d.clientHeight*2+1,r.setFromCamera(n,this.camera);var o=this.assets.map((function(e){return e.meshes})).flat(),c=r.intersectObjects(o,!0);void 0!==c[0]&&(this.objectMesh=c[0],c[0].object.traverseAncestors((function(e){void 0!==e.userData.asset&&(t.gltfName=e.userData.asset.name)})))},loadGLTF:function(e){var t=this;(new f.a).load(e,(function(e){return t.loadfile(e)}),(function(e){}),(function(e){console.log("An error happened"+e)}))},loadfile:function(e){var t=this;this.scene.remove(this.scene.getObjectByName("New")),e.scenes.map((function(r){t.scene.name="New",t.scene.add(r);var n=new j(e.scene.children);t.assets.push(n),r.children.forEach((function(e){e.userData=O(O({},e.userData),{},{asset:n})})),t.fitCameraToCenteredObject(r,1),t.renderer.render(t.scene,t.camera)})),this.animate()},animate:function(){requestAnimationFrame(this.animate),this.renderer.render(this.scene,this.camera)},fitCameraToCenteredObject:function(object,e){var t=new l.e;t.setFromObject(object);var r=new l.Ab,n=new l.Ab;t.getSize(n),t.getCenter(r);var o=this.camera.fov*(Math.PI/180),c=2*Math.atan(Math.tan(o/2)*this.camera.aspect),h=n.z/2+Math.abs(n.x/2/Math.tan(c/2)),d=n.z/2+Math.abs(n.y/2/Math.tan(o/2)),f=Math.max(h,d);void 0!==e&&0!==e&&(f*=e),this.camera.position.set(-f,f,f);var m=t.min.z,w=m<0?-m+f:f-m;this.camera.far=3*w,this.camera.lookAt(r.x,r.y,r.z),f>1e4&&(this.camera.near=10,this.camera.far=1e5),this.camera.updateProjectionMatrix(),void 0!==this.orbitControls&&(this.orbitControls.target=new l.Ab(r.x,r.y,r.z),this.orbitControls.maxDistance=2*w)},onWindowResize:function(){this.$nextTick((function(){this.camera&&(this.camera.aspect=this.$refs.player3d.clientWidth/this.$refs.player3d.clientHeight,this.camera.updateProjectionMatrix()),this.renderer&&this.renderer.setSize(this.$refs.player3d.clientWidth,this.$refs.player3d.clientHeight)}))}}},x=r(96),component=Object(x.a)(C,(function(){var e=this;return(0,e._self._c)(n.a,{directives:[{def:o.a,name:"resize",rawName:"v-resize",value:e.onWindowResize,expression:"onWindowResize"}],ref:"player3d",style:"height: 100%; width: 100%; border-radius: ".concat(e.borderRadius?e.borderRadius:"0px"),attrs:{id:"player3d"},on:{click:function(t){return e.toggleClick(t)}}})}),[],!1,null,null,null);t.default=component.exports}}]);